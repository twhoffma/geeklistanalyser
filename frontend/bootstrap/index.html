<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Geeklist Analyzer</title>

    <!-- Bootstrap -->
    <link href="css/frontend.css" rel="stylesheet">
	<link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	
  </head>
  <body>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>-->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!--<script src="js/bootstrap.min.js"></script>-->
	<script src="js/frontend.js"></script>
	<script>
		var selectedGeeklist = 0;
		
		function enableMenuButtons(enabled){
			$('button#menuBtnSort').prop('disabled', !enabled);
			$('button#menuBtnFilter').prop('disabled', !enabled);
		}		
	
		$(document).ready(function(){
			getGeeklists();
			enableMenuButtons(false);
	
			$('#loadmore').on("click", function(){
				loadGeeklist(selectedGeeklist, 10, $('.gameline').length);
			});
			
			$('.dropdown-menu').on("click", ".geeklist-menu-item", function(){
				enableMenuButtons(false);
				
				selectedGeeklist = this.dataset.geeklistid;
				loadGeeklist(selectedGeeklist, 10, 0);
				loadGeeklistFilters(selectedGeeklist);	
				
				enableMenuButtons(true);
				
			});

			$('.selects').on("click", function(e){
				//e.preventDefault();
				e.stopPropagation();
			});
			
			$('button#sort,button#filter').on("click", function(){
				loadGeeklist(selectedGeeklist, 10, 0);
			});
		});
	</script>
	
	<nav class="navbar navbar-default">
  		<div class="container-fluid">
    		<!-- Brand and toggle get grouped for better mobile display -->
    		<div class="navbar-header">
      			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        			<span class="sr-only">Toggle navigation</span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
      			</button>
      			<a class="navbar-brand" href="#">GLAM - GeekList Analyser and Monitor</a>
    		</div>

    		<!-- Collect the nav links, forms, and other content for toggling -->
    		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
     			<ul class="nav navbar-nav">
        			<li class="dropdown" id="geeklists">
          				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="glyphicon glyphicon-list">Geeklists</span><span class="caret"></span></a>
          				<ul class="dropdown-menu" role="menu">
          				</ul>
        			</li>
      			</ul>
      			<!--	
				<form class="navbar-form navbar-left" role="search">
        			<div class="form-group">
          				<input type="text" class="form-control" placeholder="Search">
        			</div>
        			<button type="submit" class="btn btn-default">Submit</button>
      			</form>
				-->
      			<ul class="nav navbar-nav navbar-right">
					<button type="button" class="btn btn-link btn-sm" data-toggle="modal" data-target="#sortingModal" id="menuBtnSort"><span class="glyphicon glyphicon-sort-by-attributes"></span>Sorting</button>
					<button type="button" class="btn btn-link btn-sm" data-toggle="modal" data-target="#filteringModal" id="menuBtnFilter"><span class="glyphicon glyphicon-filter">Filters</span></button>
					<button type="button" class="btn btn-link btn-sm" data-toggle="modal" data-target="#infoModal" id="menuBtnInfo"><span class="glyphicon glyphicon-info-sign">Info</span></button>
					<button type="button" class="btn btn-link btn-sm"><span class="glyphicon glyphicon-stats">Graphs</span></button>
      			</ul>
    		</div><!-- /.navbar-collapse -->
  		</div><!-- /.container-fluid -->
	</nav>
	<div id="sortingModal" class="modal fade" role="dialog">
 		<div class="modal-dialog">

    		<!-- Modal content-->
    		<div class="modal-content">
      			<div class="modal-header">
        			<button type="button" class="close" data-dismiss="modal">&times;</button>
        			<h4 class="modal-title">Sorting</h4>
      			</div>
      			<div class="modal-body">
					<form>
            			<li>
							<select id="sortby">
								<option value="crets" selected>Addition time</option>
								<option value="name">Name</option>
								<option value="cnt">Count</option>
								<option value="thumbs">Thumbs</option>
								<option value="year">Year</option>
							</select>
						</li>	
						<li>
							<input type="radio" name="sortby_asc" value="1">Ascending</input>
							<input type="radio" name="sortby_asc" value="0" checked="checked">Descending</input>
						</li>
					</form>
      			</div>
      			<div class="modal-footer">
        			<button type="button" class="btn btn-default" data-dismiss="modal" id="sort">Sort</button>
      			</div>
			</div>
		</div>
	</div>
	<div id="filteringModal" class="modal fade" role="dialog">
 		<div class="modal-dialog">

    		<!-- Modal content-->
    		<div class="modal-content">
      			<div class="modal-header">
        			<button type="button" class="close" data-dismiss="modal">&times;</button>
        			<h4 class="modal-title">Filters</h4>
      			</div>
      			<div class="modal-body">
					<form>
            			<li>
							<ul><label for="boardgameartist">Artist</label>
							<select id="boardgameartist"></select></ul>
							
							<ul><label for="boardgamedesigner">Designer</label>
							<select id="boardgamedesigner"></select></ul>
							
							<ul><label for="boardgamemechanic">Mechanic</label>
							<select id="boardgamemechanic"></select></ul>
							
							<ul><label for="boardgamecategory">Category</label>
							<select id="boardgamecategory"></select></ul>

							<ul>
								<label for="releasetype">
								<select id="releasetype">
									<option value="">All</option>
									<option value="boardgame">Boardgames</option>
									<option value="expansion">Expansions</option>
									<option value="collection">Collections</option>
								</select>
							</ul>
							<ul>
								<div data-role="rangeslider">
  									<label for="range-1a">Rangeslider:</label>
								 	<input name="range-1a" id="range-1a" min="0" max="100" value="0" type="range" />
  									<label for="range-1b">Rangeslider:</label>
  									<input name="range-1b" id="range-1b" min="0" max="100" value="100" type="range" />
								</div>
							</ul>
						</li>	
					</form>
      			</div>
      			<div class="modal-footer">
        			<button type="button" class="btn btn-default" data-dismiss="modal" id="filter">Filter</button>
      			</div>
			</div>
		</div>
	</div>
	<!-- This is the BGG attribution and should be visible on each page load-->
	<div id="infoModal" class="modal fade" role="dialog">
 		<div class="modal-dialog">

    		<!-- Modal content-->
    		<div class="modal-content">
      			<div class="modal-header">
        			<button type="button" class="close" data-dismiss="modal">&times;</button>
        			<h4 class="modal-title">Info</h4>
      			</div>
      			<div class="modal-body">
      				<p>All data is taken for free from BoardGameGeek's XMLAPI. As with that data, this data is strictly for non-commerical use and should not be altered.</p>
					<p>I made it to get my ducks in a row before Essen 2015 and to learn new technologies. I won't guarantee anything about what you see here. It may be counting right, it may be wrong. In the case where lists-of-lists are available, some lists have been excluded to avoid "poisoning" the data.</p>
					<p>Please do not try to exploit or crash my server. It's probably not that hard - but we're all friends here right?</p>
					<p>If you want to play around with the code you can find it on <a href="https://github.com/twhoffma/geeklistanalyser" target="_blank">GitHub</a>.</p>
				</div>
      			<div class="modal-footer">
      			</div>
			</div>
		</div>
	</div>
	<div class="alert alert-warning alert-dismissible" role="alert" id="bggAttribution">
  		<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  		All this beautiful data is provided by BoardGameGeek and their BGG XML API. You may not use this data or system for commercial purposes or modify the data in any way. Please be nice and respect it ;)
	</div>
	<!-- The actual list -->
	<div id="geeklist">
		<table class="table table-striped table-bordered">
			<thead>
				<tr>
					<th>Name</th>
					<th class="hidden-xs">Year Published</th>
					<th class="hidden-xs">Min players</th>
					<th class="hidden-xs">Max players</th>
					<th class="hidden-xs">Playing time</th>
					<th class="hidden-xs">Min playingtime</th>
					<th class="hidden-xs">Max playingtime</th>
					<th class="hidden-xs">Thumbs</th>
					<th class="hidden-xs">Count</th>
					<th class="hidden-s">Added</th>
				</tr>	
			</thead>
			<tbody id="games"></tbody>		
		</table>
		<button id="loadmore">Load more</button>
	</div>
  </body>
</html>

